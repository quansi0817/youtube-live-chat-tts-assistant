<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Live Chat TTS Assistant</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .control-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        .bg-control {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            background: #ffffff;
            padding: 5px 15px;
            border-radius: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .grid-settings {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .setting-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .full-width {
            grid-column: span 2;
        }
        input.input, select.select {
            padding: 8px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-size: 14px;
        }
        .video-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex: 1;
        }
        .video-input-group .input {
            flex: 1;
            min-width: 200px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ðŸŽ¥ YouTube Live Chat Assistant</h1>
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-label">Connection:</span>
                    <span id="connectionStatus" class="status-badge disconnected">Not Connected</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="card">
                <div class="card-header">
                    <h2>TTS & Overlay Dashboard</h2>
                </div>
                <div class="card-body">
                    <!-- Video Connection Section -->
                    <div class="control-group">
                        <div class="video-input-group" style="flex: 1; display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="videoIdInput" class="input" placeholder="Enter YouTube Video ID or URL" style="flex: 1;">
                            <button id="connectBtn" class="btn btn-success">Connect</button>
                            <button id="disconnectBtn" class="btn btn-secondary" disabled>Disconnect</button>
                        </div>
                        <div class="bg-control">
                            <label>Chat BG:</label>
                            <input type="range" id="bgOpacity" min="0" max="100" value="0">
                            <span id="opacityVal">0%</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="btn-group">
                            <a href="chat-view.html" id="chatViewLink" target="_blank" class="btn btn-primary">Open Chat View</a>
                            <a href="selected-view.html" target="_blank" class="btn btn-secondary">Open Selected View</a>
                        </div>
                        <div style="font-size: 12px; color: #666; margin-left: 15px;">
                            Examples: <code>dQw4w9WgXcQ</code> or <code>https://www.youtube.com/watch?v=dQw4w9WgXcQ</code>
                        </div>
                    </div>

                    <!-- TTS Settings -->
                    <div class="settings-section">
                        <h3>ðŸ”Š Voice Settings (AI Optimized for Chinese)</h3>
                        <div class="grid-settings">
                            <div class="setting-item">
                                <label>Provider:</label>
                                <select id="ttsProvider" class="select">
                                    <option value="openai">OpenAI (Standard)</option>
                                    <option value="elevenlabs">ElevenLabs (Multilingual V2)</option>
                                    <option value="google">Google Cloud (Neural2)</option>
                                    <option value="system">System Default</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>Voice Selection:</label>
                                <select id="ttsVoice" class="select">
                                    <!-- OpenAI Voices -->
                                    <option value="nova" data-provider="openai">Nova (Female, Warm, Best for Chinese)</option>
                                    <option value="alloy" data-provider="openai">Alloy (Female, Clear)</option>
                                    <option value="echo" data-provider="openai">Echo (Male, Calm)</option>
                                    <option value="fable" data-provider="openai">Fable (Female, Storyteller)</option>
                                    <option value="onyx" data-provider="openai">Onyx (Male, Deep)</option>
                                    <option value="shimmer" data-provider="openai">Shimmer (Female, Bright)</option>
                                    <!-- ElevenLabs Chinese Voices -->
                                    <option value="21m00Tcm4TlvDq8ikWAM" data-provider="elevenlabs">Rachel (Multilingual, Excellent Chinese)</option>
                                    <option value="AZnzlk1XvdvUeBnXmlld" data-provider="elevenlabs">Drew (Deep Male)</option>
                                    <option value="29vD33N1CtxCmqQRPOHJ" data-provider="elevenlabs">Clyde (Warm Male)</option>
                                    <option value="IKne3meq5aSn9XLyUdCD" data-provider="elevenlabs">Paul (Clear Male)</option>
                                    <!-- Google Neural2 Voices -->
                                    <option value="zh-CN-Neural2-A" data-provider="google">Neural2-A (Female, Natural)</option>
                                    <option value="zh-CN-Neural2-B" data-provider="google">Neural2-B (Male, Standard)</option>
                                    <option value="zh-CN-Neural2-C" data-provider="google">Neural2-C (Male, News Style)</option>
                                    <option value="zh-CN-Neural2-D" data-provider="google">Neural2-D (Female, Warm)</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>Volume: <span id="volumeValue">100</span>%</label>
                                <input type="range" id="ttsVolume" min="0" max="100" value="100">
                            </div>
                            <div class="setting-item">
                                <label>Speed: <span id="speedValue">1.0</span>x</label>
                                <input type="range" id="ttsSpeed" min="50" max="200" value="100">
                            </div>
                            <div class="setting-item full-width">
                                <label>API Key:</label>
                                <input type="password" id="ttsApiKey" class="input" placeholder="Enter your API Key here">
                            </div>
                        </div>
                        <button id="testTtsBtn" class="btn btn-secondary" style="margin-top: 15px; width: 100%;">Test Voice Settings</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/app.js"></script>
    <script>
        const settingsChannel = new BroadcastChannel('chat-settings');
        const bgOpacity = document.getElementById('bgOpacity');
        const opacityVal = document.getElementById('opacityVal');
        
        bgOpacity.addEventListener('input', (e) => {
            const val = e.target.value;
            opacityVal.textContent = val + '%';
            const color = `rgba(0, 0, 0, ${val / 100})`;
            settingsChannel.postMessage({ type: 'UPDATE_BG_COLOR', color: color });
            localStorage.setItem('chatBgColor', color);
        });

        document.getElementById('chatViewLink').addEventListener('click', (e) => {
            window.open('chat-view.html', 'chat-view', 'width=400,height=800');
            e.preventDefault();
        });
    </script>
</body>
</html>
